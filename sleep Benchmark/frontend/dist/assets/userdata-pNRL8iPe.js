import{s as n}from"./supabaseClient-Du0KSO2k.js";(async()=>{const{data:t,error:e}=await n.auth.getSession();if(e||!t.session){alert("You must be logged in to access this page."),window.location.href="/login.html";return}})();const s=document.getElementById("user-data-form");s&&s.addEventListener("submit",async t=>{t.preventDefault();const{data:{user:e},error:r}=await n.auth.getUser();if(r||!e){alert("You must be logged in to submit data.");return}const a={id:e.id,name:document.getElementById("name").value,age:parseInt(document.getElementById("age").value),phone:document.getElementById("phone").value,alt_phone:document.getElementById("altPhone").value||null,gender:document.getElementById("gender").value,occupation:document.getElementById("occupation").value,height:parseFloat(document.getElementById("height").value),weight:parseFloat(document.getElementById("weight").value)};JSON.stringify(a),console.log("Submitting data:",a);const{error:o}=await n.from("user_data").upsert(a);o?alert("Failed to save data: "+o.message):(alert("Data submitted successfully!"),window.location.href="/dashboard.html")});
