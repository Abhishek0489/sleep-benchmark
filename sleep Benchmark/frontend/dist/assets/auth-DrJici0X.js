import{s as a}from"./supabaseClient-Du0KSO2k.js";(async()=>{const{data:{session:e},error:o}=await a.auth.getSession(),t=window.location.pathname.includes("login")||window.location.pathname.includes("signup");e&&t&&(console.log("User already logged in. Redirecting to /dashboard.html..."),window.location.href="/dashboard")})();const s=document.getElementById("signup-form");s&&s.addEventListener("submit",async e=>{e.preventDefault();const o=document.getElementById("signup-email").value,t=document.getElementById("signup-password").value,{error:n}=await a.auth.signUp({email:o,password:t});n?alert("Signup failed: "+n.message):(alert("Signup successful! Check your email to confirm."),window.location.href="/userdata.html")});const i=document.getElementById("login-form");i&&i.addEventListener("submit",async e=>{e.preventDefault();const o=document.getElementById("login-email").value,t=document.getElementById("login-password").value,{error:n}=await a.auth.signInWithPassword({email:o,password:t});n&&alert("Login failed: "+n.message)});a.auth.onAuthStateChange((e,o)=>{e==="SIGNED_IN"&&(console.log("User signed in."),(window.location.pathname.includes("login")||window.location.pathname.includes("signup"))&&(alert("Login successful!"),window.location.href="/dashboard"))});document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("logout-button");e&&e.addEventListener("click",async()=>{const{error:o}=await a.auth.signOut();o?alert("Logout failed: "+o.message):(alert("You have been logged out."),window.location.href="/login.html")})});document.addEventListener("DOMContentLoaded",async()=>{if(["dashboard.html","userdata.html"].some(t=>window.location.pathname.includes(t))){const{data:{user:t},error:n}=await a.auth.getUser();n||!t?(console.log("User not logged in or error occurred. Redirecting to login."),window.location.href="/login.html"):console.log("User is logged in. Access granted.")}});
